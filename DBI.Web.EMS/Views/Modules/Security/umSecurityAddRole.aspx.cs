using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using Ext.Net;

namespace DBI.Web.EMS.Views.Modules.Security
{
    public partial class umSecurityAddRole : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void deAddSecurityRole(object sender, DirectEventArgs e)
        {

            if (uxName.Text == "" || uxDescription.Text == "")
            {
                X.Js.Call("parent.App.direct.dmShowAlert", "Fields Missing", "Name and Description are required fields!");
            }
            else
            {
                    DBI.Data.SYS_ROLES role = new Data.SYS_ROLES();
                    role.NAME = uxName.Text;
                    role.DESCRIPTION = uxDescription.Text;
                    DBI.Data.DataFactory.Security.Roles.InsertRole(role);

                    //Refresh the Security Roles View
                    X.Js.Call("parent.App.direct.dmRefreshRoles");

                    //Close the autogenerated window
                    X.Js.Call("parent.Ext.WindowMgr.getActive().close");
    
            }

        }
    }
}